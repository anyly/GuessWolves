<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="renderer" content="webkit">
    <title></title>
</head>
<body>
    <div>
            <audio controls autoplay></audio>
            <input onclick="startRecording()" type="button" value="录音" />
            <input onclick="stopRecording()" type="button" value="停止" />
            <input onclick="playRecording()" type="button" value="播放" />
            <input onclick="exportRecording()" type="button" value="提交" />
        </div>
<script type="text/javascript" src="js/recorder.js"></script>
<script>
    // 获得window.MediaStreamSource
    var mediaStreamSource;
    if (navigator.getUserMedia) {
        navigator.getUserMedia({
            video:true,
            audio:true
        }, function (localMediaStream){
            var context = new AudioContext();
            mediaStreamSource = context.createMediaStreamSource(localMediaStream);
        }, function(e){
            alert('发生错误:'+e.toString());
        });
    }else {
        alert("你的浏览器不支持录音");
    }

    // 开始录音
    var recorder;
    function startRecording() {
        recorder = new Recorder(mediaStreamSource);
    }
    function stopRecording() {
        recorder.stop();
    }
    function playRecording() {

    }
    function exportRecording() {
        recorder.exportWAV(function (blob) {
            // 输出录音pcm
            console.log(blob);
        })
    }
</script>
</body>
</html>